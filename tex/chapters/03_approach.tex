\chapter{Approach}
\label{chap:Approach}

\abstract{The first section of the third chapter describes the existing application the evaluation is based on.  In addition the implementation process is illustrated and methods the comparison of languages is based on are introduced.}

\section{Overview: Streets4MPI}
\label{sec:Approach::Overview}

As stated in~\autoref{sec:Introduction::Goals} the language evaluation is based on a reimplementation of an existing parallel program originally written in Python. The application in question is \textit{streets4MPI} - a traffic simulation using OpenStreetMap files as input and calculating shortest routes via Dijkstra's algorithm. Streets4MPI was implemented in scope of the module ``Parallel Programming Project'' in Spring 2012. It was written by Julian Fietkau and Joachim Nitschke and makes heavy use of the various libraries of the Python ecosystem. The original project contained the main simulation as well as a visualization script.~\cite[p.~3]{streets_report} For the purpose of this thesis the visualization was omitted and the evaluation is only based on software quality metrics as well as the result's correctness. //TODO: really cite page?

\section{Differences to the base implementation}
\label{sec:Approach::Differences}

Although the evaluated implementations are based on the original Streets4MPI, there are some key differences (mainly to reduce complexity). This section gives a brief overview over the most important aspects that have been changed and describes both the original application as well as the the redeveloped version.

In the course of the thesis the different implementations will be referenced quite frequently. For brevity each application will be called by its name ``streets4<language>'' for example ``streets4go''. //wording..

\subsection*{Input format}
\label{subsec:Approach::Differences::Input}

The original implementation used the somewhat dated OpenStreetMap XML format~\footnote{\url{http://wiki.openstreetmap.org/wiki/OSM_XML}} as input which is parsed by \textit{imposm.parser}~\footnote{\url{http://imposm.org/docs/imposm.parser/latest/}}. Streets4MPI then builds a directed graph via the \textit{python-graph}~\footnote{\url{https://code.google.com/p/python-graph/}} library to base the simulation on.\cite{streets_report}

The reimplementations require the input to be in ``.osm.pbf'' format. This newer version of the OpenStreetMap format is based on Google's \textit{Protocol Buffers}~\footnote{\url{https://developers.google.com/protocol-buffers/}} and is superior to the XML variant in both size and speed~\cite{osm_wiki_pbf}. It also simplifies multilanguage development because the code performing the actual parsing is auto generated from a language independent description file and there are protobuf backends for C, Rust and Go which can perform that generation.

\subsection*{Simulation}
\label{subsec:Approach::Differences::Simulation}

Streets4MPI performs

\subsection*{Concurrency}
\label{subsec:Approach::Differences::Concurrency}

The base application parallelizes its calculations on multiple processes that communicate via message passing. This is achieved with the aforementioned MPI4Py library which delegates to a native MPI implementation installed on the system if possible to reach maximum performance.

Although Rust as well as Go can integrate decently with existing native code, the reimplementations will be limited to shared memory parallelization on threads. This was mostly decided to evaluate and compare the language inherent concurrency constructs rather than the quality of the forrign funtion interface. To achieve fair comparability \textit{streets4c} will use OpenMP~\footnote{\url{http://www.openmp.org}} as it is the defacto standard for simple thread parallelization in C.

\section{Implementation process}
\label{sec:Approach::Implementation}
